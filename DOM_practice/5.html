<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div id="d1"></div>
    <h1>Total: <span id="d3"></span></h1>
    <script>
        var ar = [
            {
                'rate': 4000,
                'count': 1
            },
            {
                'rate': 2000,
                'count': 1
            },
            {
                'rate': 3000,
                'count': 1
            }
        ]
        var div = document.getElementById('d1');

        function createSum(obj) {
            div.innerHTML = ''
            obj.forEach(function (a, b) {
                var span = document.createElement('span');
                span.innerHTML = a['rate'];
                div.appendChild(span);

                var btn1 = document.createElement('button')
                btn1.innerHTML = 'dec-';
                div.appendChild(btn1)
                btn1.onclick = function () {
                    obj[b].count--;
                    createSum(obj);
                   // totalSum(obj)
                }


                var inp = document.createElement('input');
                inp.value = a['count']

                div.appendChild(inp)

                var btn2 = document.createElement('button');
                btn2.innerHTML = 'Inc+'
                btn2.onclick = function(){
                    obj[b].count++;
                    createSum(obj);
                    //totalSum(obj)
                }
                div.appendChild(btn2)

                var br = document.createElement('br')
                div.appendChild(br)
            })
            totalSum(ar)
        }
        var spnOut = document.getElementById('d3')
       
        // function totalSum(){
        //     var sum = 0;
        //    ar.forEach(function(a){
        //     sum += a['rate'] * a['count']
           
        //    })
        //    spnOut.innerHTML = sum;
        // }

        
         function totalSum(g){
            var x =  g.reduce(function(a,b){
               return a + (b['rate'] * b['count'])
                
            },0);
            spnOut.innerHTML = x;
         }
           
        

        createSum(ar)



    </script>
</body>

</html>